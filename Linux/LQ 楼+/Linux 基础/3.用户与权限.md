# 用户与权限

- 用户信息文件（/etc/passwd）

    - `root : x : 0 : 0 : root : /root : /bin/bash`

    - 分隔为7个字段

    - 用户名 : 密码占位符 : 用户标识号 : 组标识符 : 注释行描述 : 主目录 : 登录的shell

    - x 表示用户需要密码登录

- 密码文件（/etc/shadow）

    - `root : &awd%awd^awd$aw : 18167 : 0 : 99999 : 7 : : :`

    - 分隔为9个字段

    - 用户名 : 加密口令 : 最后一次修改时间 : 密码最短有效天数 : 密码最长有效天数 : 密码过期前的警告时间 : 不活动时间 : 用户失效时间 : 暂时保留未使用

- 用户组文件（/etc/group）

    - `root : x : 0 :`

    - 分隔为4个字段

    - 组名 : 口令 : 组标识号 : 组内用户列表

    - 多用户可用逗号分隔开

- 创建用户

    - `useradd[选项][用户名]`

        | 选项 | 说明                                                         |
        | :--: | :----------------------------------------------------------- |
        | `-c` | comment，指定一段注释性描述                                  |
        | `-d` | 目录，指定用户主目录或家目录；如果此目录不存在，则同时使用 `-m` 选项来创建主目录 |
        | `-g` | 用户组，指定用户所属的用户组                                 |
        | `-G` | 用户组，指定用户所属的附加组                                 |
        | `-s` | Shell 文件，指定用户的登录 shell                             |
        | `-u` | 用户号，指定用户的用户号，若有 `-o` 选项，则可以重复使用其它用户的标识号 |

- 修改用户

    - `usermod[选项][用户名]`
    - 常用选项包括 `-c、-d、-m、-g、-G、-s、-u、-o` 等，选项用法与 `useradd` 相同。
    - 介绍一个 `-a` 参数，该参数可以给用户添加一个新的附加组。

- 删除用户

    - `userdel[选项][用户名]`
    -  `-r` 用于把用户的主目录一起删除。

- 查看用户信息 `w`

- 查看主机上的用户 `who` / `whoami`

- 查看登录记录 `lastlog`

- 查看用户 ID 和组信息 `id`

- 管理用户组

    - 用户组的管理和用户的管理类似，主要包括：用户组的添加、删除和修改以及用户组间切换的权限。其中用户组的增删改实际上就是对 /etc/group 文件的处理。

- 增加新的用户组

    - `groupadd[选项][用户名]`

        | 选项 | 说明                                                        |
        | ---- | ----------------------------------------------------------- |
        | `-g` | 指定新用户组的组标识号（GID），该参数指定的值必须唯一       |
        | `-o` | 与 `-g` 同时使用，允许用户组的新 GID 和系统已有用户组的相同 |

- 修改用户组

    - `groupmod[选项][用户名]`

        | 选项 | 说明                                            |
        | ---- | ----------------------------------------------- |
        | `-g` | 为用户组指定一个新的组标识号                    |
        | `-o` | 与 `-g` 同时使用时，允许将组 GID 更改为非唯一值 |
        | `-n` | 将用户组的名字修改为新的名字                    |

- 删除用户组

    - `groupdel[用户组]`

- 查看用户所属的所有组

    - 查看一个用户属于哪些组，可以使用 groups 命令，不指定用户时，查看的是当前用户属于哪些组。

- 用户的禁用和回复登录

    - 禁用

        - `usermod -L [username]`

        - `passwd -l [username]`

    - 恢复

        - `usermod -U [username]`

        - `password -u [username]`

- 将用户添加到用户组

    - `sudo uermod -aG [groupname] [username]`

- 给用户设置登录模式

    - `c`

- 总结：关于 Linux 中用户的概念、用户的增删改查、用户批量的创建、组的增删改查，以及禁止用户登录等基本命令操作。